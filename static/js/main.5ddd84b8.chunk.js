(this.webpackJsonpblackpearl=this.webpackJsonpblackpearl||[]).push([[0],{110:function(e,t){},112:function(e,t){},123:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(45),s=n.n(a),o=(n(80),n(27)),i=n(0),l=function(e){return Object(i.jsx)("div",{children:Object(i.jsx)(o.b,{to:"/bp/dashboard/",children:"Login"})})},u=n(7),d=n.n(u),b=n(10),j=n(12),h=n(26),f=n(5),p=n(2),O=n.n(p),x=n(3),g=Object(j.b)("fetchByIdStatus",function(){var e=Object(x.a)(O.a.mark((function e(t,n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("https://us-central1-stockwatch-193209.cloudfunctions.net/stocks");case 2:return r=e.sent,t(r.data),e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),m=Object(j.b)("getStocksDetailsApi",function(){var e=Object(x.a)(O.a.mark((function e(t,n){var r,c,a,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.reduce((function(e,t){return""==e?t.symbol:e+","+t.symbol}),""),c={url:"https://query1.finance.yahoo.com/v7/finance/spark?symbols="+r+"&range=1d&interval=5m&indicators=close&includeTimestamps=false&includePrePost=false&corsDomain=in.finance.yahoo.com&.tsrc=finance"},e.next=5,d.a.post("https://us-central1-stockwatch-193209.cloudfunctions.net/getstocks",c);case 5:return a=e.sent,n=a.data.spark.result,s=n.reduce((function(e,t){return Object(f.a)(Object(h.a)({},t.symbol,t.response[0].meta.regularMarketPrice),e)}),{}),e.abrupt("return",s);case 8:case"end":return e.stop()}var n}),e)})));return function(t,n){return e.apply(this,arguments)}}()),v=Object(j.b)("addstocktowatchlist",function(){var e=Object(x.a)(O.a.mark((function e(t,n){var r,c,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.stock,c=t.callback,e.next=3,d.a.post("https://us-central1-stockwatch-193209.cloudfunctions.net/stocks",r);case 3:return a=e.sent,c(),e.abrupt("return",a.status);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),y=Object(j.b)("removestockfromwatchlist",function(){var e=Object(x.a)(O.a.mark((function e(t,n){var r,c,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.stockSymbol,c=t.callback,e.next=3,d.a.post("https://us-central1-stockwatch-193209.cloudfunctions.net/stocks/delete/"+r);case 3:return a=e.sent,c(),e.abrupt("return",a.status);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),k=Object(j.b)("searchstockApi",function(){var e=Object(x.a)(O.a.mark((function e(t,n){var r,c,a,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.searchTermR,c=t.callback,a={url:"https://query2.finance.yahoo.com/v1/finance/search?q="+r+"&quotesCount=6&newsCount=0&enableFuzzyQuery=false&quotesQueryId=tss_match_phrase_query&multiQuoteQueryId=multi_quote_single_token_query&newsQueryId=news_ss_symbols&enableCb=false&enableNavLinks=false&vespaNewsTimeoutMs=600"},e.next=5,d.a.post("https://us-central1-stockwatch-193209.cloudfunctions.net/getstocks",a);case 5:return s=e.sent,c(),e.abrupt("return",s.data.quotes);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),w=Object(j.b)("getStockChartData",function(){var e=Object(x.a)(O.a.mark((function e(t,n){var r,c,a,s,o,i,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.symbol,c=t.sevendayprevts,a=t.currentdatets,s=t.callback,o="https://query2.finance.yahoo.com/v8/finance/chart/"+r+"?formatted=true&lang=en-US&region=US&includeAdjustedClose=true&interval=1d&period1="+c+"&period2="+a+"&events=capitalGain%7Cdiv%7Csplit&useYfid=true&corsDomain=finance.yahoo.com",console.log("URL: ",o),i={url:o},e.next=6,d.a.post("https://us-central1-stockwatch-193209.cloudfunctions.net/getstocks",i);case 6:return l=e.sent,s(),e.abrupt("return",l);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),S=Object(j.c)({name:"watchlist",initialState:{stockprices:{},searchterm:"",searchlist:[],watchlist:[],chartData:{}},reducers:{setsearchtermR:function(e,t){e.searchterm=t.payload}},extraReducers:function(e){e.addCase(g.fulfilled,(function(e,t){e.watchlist=t.payload})),e.addCase(m.fulfilled,(function(e,t){e.stockprices=t.payload})),e.addCase(v.fulfilled,(function(e,t){})),e.addCase(y.fulfilled,(function(e,t){})),e.addCase(k.fulfilled,(function(e,t){e.searchlist=t.payload})),e.addCase(w.fulfilled,(function(e,t){console.log("Success Action: ",t.payload);var n=t.payload.data.chart.result[0].meta.symbol;e.chartData[n]=t.payload}))}}),D=S.actions.setsearchtermR,C=S.reducer,N=n(6);function A(e){var t=e.entry,n=Object(r.useState)(""),c=Object(N.a)(n,2),a=c[0],s=c[1];return Object(i.jsxs)("div",{style:{display:"flex"},children:[Object(i.jsx)("input",{style:{width:"70px"},type:"text",placeholder:"Risk",value:a,onChange:function(e){s(e.target.value.replace(/\D/,""))}}),Object(i.jsx)("div",{style:{margin:10},children:Math.round(a/t)})]})}var E=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.watchlist.stockprices})),n=Object(b.c)((function(e){return e.watchlist.searchlist})),c=Object(b.c)((function(e){return e.watchlist.searchterm})),a=Object(b.c)((function(e){return e.watchlist.watchlist})),s=Object(b.c)((function(e){return e.watchlist.chartData})),o=function(){var t={};t.searchTermR=c+"",t.callback=function(){},e(k(t))};return Object(r.useEffect)((function(){e(g((function(t){e(m(t))})))}),[]),Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)("input",{type:"text",placeholder:"Search",value:c,onChange:function(t){e(D(t.target.value)),c.length},onKeyDown:function(e){if(13===e.keyCode){if(0==c.length)return void alert("Please enter name of stock");o()}}}),Object(i.jsxs)("button",{onClick:function(){o()},children:[" ","Search"," "]}),Object(i.jsxs)("table",{border:"1px solid black;",children:[Object(i.jsx)("th",{children:"Search List"}),Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{children:"Exchange"}),Object(i.jsx)("th",{children:"Name"})]}),n.map((function(t){return Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:t.exchDisp})," ",Object(i.jsx)("td",{children:t.shortname})," ",Object(i.jsx)("td",{children:Object(i.jsx)("button",{onClick:function(){var n={};n.stock=t,n.callback=function(){e(g((function(t){e(m(t))})))},e(v(n))},children:"Add"})})]})}))]}),Object(i.jsx)("br",{}),Object(i.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:Object(i.jsxs)("table",{border:"1px solid black;",children:[Object(i.jsx)("tr",{children:Object(i.jsx)("th",{children:"WatchList"})}),a.length>0?Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{}),Object(i.jsx)("th",{children:"Exchange"}),Object(i.jsx)("th",{children:"Name"}),Object(i.jsx)("th",{children:"Price"}),Object(i.jsx)("th",{}),Object(i.jsx)("th",{children:"SL"}),Object(i.jsx)("th",{children:"TARGET"}),Object(i.jsx)("th",{children:"  ENTRY  "}),Object(i.jsx)("th",{children:"Profit%"}),Object(i.jsx)("th",{children:"Total Amt  | Buy Qty "})]}):null,a.map((function(n){var r=[],c=0,a=0,o=t[n.symbol],l=0;if(console.log("ChartData: ",JSON.stringify(s)),s&&s[n.symbol]){var u=(r=s[n.symbol].data.chart.result[0].indicators.quote[0].low).at(-1),d=r.at(-2);a=2*(o-(c=d<u?d-1:u-1))+o,l=2*(o-c)/o*100,Math.round(o-c)}return Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:Object(i.jsx)("button",{onClick:function(){return function(t){var n={};n.stockSymbol=t,n.callback=function(){e(g((function(t){e(m(t))})))},e(y(n))}(n.symbol)},children:"Remove"})}),Object(i.jsx)("td",{children:n.exchDisp})," ",Object(i.jsx)("td",{children:n.shortname})," ",Object(i.jsxs)("td",{children:[t[n.symbol],"  "]}),Object(i.jsx)("td",{children:Object(i.jsx)("button",{onClick:function(){var t={};t.symbol=n.symbol,t.sevendayprevts=Math.round(new Date(Date.now()-6048e5).getTime()/1e3),t.currentdatets=Math.round((new Date).getTime()/1e3),console.log("Seven day prev time: ",Math.round(new Date(Date.now()-6048e5).getTime()/1e3)),t.callback=function(){},e(w(t))},children:"Calculate"})}),Object(i.jsx)("td",{children:Math.round(c)}),Object(i.jsx)("td",{children:Math.round(a)}),Object(i.jsx)("td",{children:Math.round(o)}),Object(i.jsx)("td",{children:Math.round(l)}),Object(i.jsx)("td",{children:Object(i.jsx)(A,{entry:o})})]})}))]})})]})},I=Object(j.b)("getstrategies",function(){var e=Object(x.a)(O.a.mark((function e(t,n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("https://us-central1-stockwatch-193209.cloudfunctions.net/strategy");case 2:return r=e.sent,t(r.data),e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),L=Object(j.b)("deletestrategy",function(){var e=Object(x.a)(O.a.mark((function e(t,n){var r,c,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.strategy,c=t.callback,e.next=3,d.a.post("https://us-central1-stockwatch-193209.cloudfunctions.net/strategy/delete",r);case 3:return a=e.sent,c(a.data),e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),T=Object(j.b)("addstrategy",function(){var e=Object(x.a)(O.a.mark((function e(t,n){var r,c,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.strategy,c=t.callback,e.next=3,d.a.post("https://us-central1-stockwatch-193209.cloudfunctions.net/strategy",r);case 3:return a=e.sent,c(a.data),e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());var M=function(){var e=Object(b.b)(),t=c.a.useState(""),n=Object(N.a)(t,2),a=n[0],s=n[1],o=c.a.useState(""),l=Object(N.a)(o,2),u=l[0],j=l[1],h=c.a.useState(""),f=Object(N.a)(h,2),p=f[0],O=f[1],x=c.a.useState([]),y=Object(N.a)(x,2),k=(y[0],y[1]),w=c.a.useState([]),S=Object(N.a)(w,2),D=(S[0],S[1],c.a.useState([])),C=Object(N.a)(D,2),A=(C[0],C[1],c.a.useState("")),E=Object(N.a)(A,2),M=E[0],J=E[1],F=Object(b.c)((function(e){return e.watchlist.stockprices})),U=Object(b.c)((function(e){return e.watchlist.searchlist})),q=(Object(b.c)((function(e){return e.watchlist.searchterm})),Object(b.c)((function(e){return e.watchlist.watchlist}))),P=Object(b.c)((function(e){return e.strategies.strategies})),R=function(e){s(e.target.value)},Y=function(e){13===e.keyCode&&_()},_=function(){if(0!=a.length){var e="https://query2.finance.yahoo.com/v1/finance/search?q="+a+"&quotesCount=6&newsCount=0&enableFuzzyQuery=false&quotesQueryId=tss_match_phrase_query&multiQuoteQueryId=multi_quote_single_token_query&newsQueryId=news_ss_symbols&enableCb=false&enableNavLinks=false&vespaNewsTimeoutMs=600";d.a.request({method:"get",url:"https://api.allorigins.win/get?url=".concat(encodeURIComponent(e))}).then((function(e){console.log(e),k(JSON.parse(e.data.contents).quotes)}))}else alert("Please enter name of stock")};return Object(r.useEffect)((function(){e(I((function(e){})))}),[]),Object(i.jsxs)("div",{className:"App",children:[Object(i.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginLeft:10},children:[Object(i.jsx)("input",{style:{width:"300px"},type:"text",placeholder:"Strategy Name",value:a,onChange:R,onKeyDown:Y}),Object(i.jsx)("input",{style:{width:"300px",marginTop:5},type:"text",placeholder:"Url",value:u,onChange:function(e){j(e.target.value)}}),Object(i.jsx)("input",{style:{width:"300px",marginTop:5},type:"text",placeholder:"Scan Script",value:p,onChange:function(e){O(e.target.value)}}),Object(i.jsx)("button",{style:{width:"100px",marginTop:2},onClick:function(){var t={};t.strategy={name:a,url:u,scan:p},t.callback=function(){e(I((function(e){})))},e(T(t))},children:"Add Strategy"})]}),Object(i.jsx)("br",{}),Object(i.jsx)("br",{}),Object(i.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:["\xa0\xa0",Object(i.jsxs)("table",{border:"1px solid black;",children:[Object(i.jsx)("tr",{children:Object(i.jsx)("th",{children:"\xa0\xa0Strategy\xa0\xa0"})}),P.length>0?Object(i.jsx)("tr",{children:Object(i.jsx)("th",{children:"Name"})}):null,P.map((function(t){return Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:t.name}),Object(i.jsx)("td",{children:Object(i.jsx)("button",{onClick:function(){var n={};n.strategy=t,n.callback=function(){e(I((function(e){})))},e(L(n))},children:"Remove"})})]})}))]})]}),Object(i.jsx)("div",{style:{display:"flex",flexDirection:"row",marginTop:20},children:P.map((function(e){return Object(i.jsx)("div",{onClick:function(){J(e.name)},style:{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:M==e.name?"green":"grey",padding:"10px",color:"white",borderRadius:30,margin:10},children:e.name})}))}),Object(i.jsx)("br",{}),Object(i.jsx)("br",{}),Object(i.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"30%",marginLeft:10},children:[Object(i.jsx)("input",{type:"text",placeholder:"Search",value:a,onChange:R,onKeyDown:Y}),Object(i.jsxs)("button",{style:{width:"40%",marginTop:2},onClick:function(){_()},children:[" ","Search"," "]})]}),Object(i.jsx)("br",{}),Object(i.jsx)("br",{}),Object(i.jsxs)("table",{border:"1px solid black;",children:[Object(i.jsx)("th",{children:"Search List"}),Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{children:"Exchange"}),Object(i.jsx)("th",{children:"Name"})]}),U.map((function(t){return Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:t.exchDisp})," ",Object(i.jsx)("td",{children:t.shortname})," ",Object(i.jsx)("td",{children:Object(i.jsx)("button",{onClick:function(){var n={};n.stock=t,n.callback=function(){e(g((function(t){e(m(t))})))},e(v(n))},children:"Add"})})]})}))]}),Object(i.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:Object(i.jsxs)("table",{border:"1px solid black;",children:[Object(i.jsx)("tr",{children:Object(i.jsx)("th",{children:"WatchList"})}),q.length>0?Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{children:"Exchange"}),Object(i.jsx)("th",{children:"Name"}),Object(i.jsx)("th",{children:"Price"})]}):null,q.map((function(e){return Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:e.exchDisp})," ",Object(i.jsx)("td",{children:e.shortname})," ",Object(i.jsxs)("td",{children:[F[e.symbol],"  "]}),Object(i.jsx)("td",{children:Object(i.jsx)("button",{onClick:function(){},children:"Remove"})})]})}))]})})]})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,125)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))},F=n(75),U=function(){var e=Object(r.useState)(null),t=Object(N.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(N.a)(a,2),o=s[0],l=s[1],u=Object(r.useState)(""),d=Object(N.a)(u,2),b=d[0],j=d[1];Object(r.useEffect)((function(){var e=Object(F.a)("https://f682-210-16-94-208.ngrok.io");c(e)}),[]),n&&n.on("message",(function(e){console.log("received message: ",e),j((function(t){return t+"\n"+e}))}));return Object(i.jsxs)("div",{children:[Object(i.jsx)("p",{children:"Message :"}),Object(i.jsx)("input",{value:o,onChange:function(e){return l(e.target.value)}}),Object(i.jsx)("button",{onClick:function(e){n.emit("message",o),l("")},children:"Send"}),Object(i.jsxs)("div",{children:["Incoming Message: ",b]})]})},q=n(4),P=Object(j.c)({name:"strategies",initialState:{strategies:[{name:"All Strategies"}]},reducers:{},extraReducers:function(e){e.addCase(I.fulfilled,(function(e,t){e.strategies=t.payload,e.strategies.unshift({name:"All Strategies"})})),e.addCase(L.fulfilled,(function(e,t){})),e.addCase(T.fulfilled,(function(e,t){}))}}).reducer,R=n(14),Y=n(48),_=n(71),Q=n.n(_),W=Object(R.b)({watchlist:C,strategies:P}),V={key:"root",storage:Q.a},B=Object(Y.a)(V,W),G=Object(j.a)({reducer:B});function z(){return Object(i.jsxs)("div",{children:[Object(i.jsx)("h1",{children:"Black Pearl 2.0"}),Object(i.jsxs)("nav",{style:{paddingBottom:"1rem"},children:[Object(i.jsx)(o.b,{to:"/bp/dashboard/watchlist",children:"WatchList"})," |","  ",Object(i.jsx)(o.b,{to:"/bp/dashboard/strategies",children:"Strategies"})," |","  ",Object(i.jsx)(o.b,{to:"/bp/dashboard/backtest",children:"BackTest"})," |","  ",Object(i.jsx)(o.b,{to:"/bp/dashboard/socket",children:"Socket"})]})]})}var X=n(35),K=n(72),H=n(36),Z=n.n(H),$=(n(124),function(){var e=Object(r.useState)(!1),t=Object(N.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!1),s=Object(N.a)(a,2),o=s[0],l=s[1],u=Object(r.useState)([]),j=Object(N.a)(u,2),p=j[0],g=j[1],m=Object(r.useState)({}),v=Object(N.a)(m,2),y=v[0],k=v[1],w=Object(r.useState)(0),S=Object(N.a)(w,2),D=S[0],C=S[1],A=Object(r.useState)([]),E=Object(N.a)(A,2),I=E[0],L=E[1],T=Object(r.useState)({}),M=Object(N.a)(T,2),J=M[0],F=M[1],U=Object(r.useState)({}),q=Object(N.a)(U,2),P=q[0],R=q[1],Y=Object(r.useState)({}),_=Object(N.a)(Y,2),Q=_[0],W=_[1],V=Object(r.useState)({}),B=Object(N.a)(V,2),G=B[0],z=B[1],H=window.location.origin.replace("3000","8080"),$={"01":"JAN","02":"FEB","03":"MAR","04":"APR","05":"MAY","06":"JUN","07":"JUL","08":"AUG","09":"SEP",10:"OCT",11:"NOV",12:"DEC"},ee=Object(b.c)((function(e){return e.strategies.strategies})),te=Object(r.useRef)();Object(r.useEffect)(Object(x.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne();case 2:return e.next=4,re();case 4:case"end":return e.stop()}}),e)}))),[]);var ne=function(){var e=Object(x.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je();case 2:return t=e.sent,n=he(t),console.log("AllDays: ",JSON.stringify(n)),L(n),e.abrupt("return");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(x.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:["%5EDJI","NDAQ","S68.SI","%5ENSEI"].map(function(){var e=Object(x.a)(O.a.mark((function e(t){var n,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce(t);case 2:return n=e.sent,r=n.timestamp,c=n.indicators,e.next=7,ae(t,r,c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(x.a)(O.a.mark((function e(t){var n,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(t);case 2:return n=e.sent,r=n.timestamp,c=n.indicators.quote[0],e.abrupt("return",{timestamp:r,indicators:c});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=Object(x.a)(O.a.mark((function e(t,n,r){var c,a,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for((c=G)[t]={},a=0;a<n.length;a++)s=Z()(1e3*n[a]).format("DD-MM-YYYY"),c[t][s]={close:r.close[a],pnl:r.close[a]-r.close[a-1]};z(c),console.log("INDEX Data: ",JSON.stringify(c));case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),se=function(){var e=Object(x.a)(O.a.mark((function e(t){var n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={url:"https://query2.finance.yahoo.com/v8/finance/chart/".concat(t,"?formatted=true&crumb=GDg7ptpgjjp&lang=en-US&region=US&includeAdjustedClose=true&interval=1d&period1=820454400&period2=").concat(Math.round(+new Date/1e3),"&events=capitalGain%7Cdiv%7Csplit&useYfid=true&corsDomain=finance.yahoo.com")},e.next=3,d.a.post("https://us-central1-stockwatch-193209.cloudfunctions.net/getstocks",n);case 3:return r=e.sent,e.abrupt("return",r.data.chart.result[0]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(x.a)(O.a.mark((function e(t,n,r){var c,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={url:t,type:n,scan_clause:{scan_clause:r}},console.log("BODY: ",JSON.stringify(c)),e.next=4,d.a.post("http://localhost:8082/apis",c);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),ie=function(e){for(var t=e.metaData[0].tradeTimes,n=[],r=0;r<e.aggregatedStockList.length;r++){var c=e.aggregatedStockList[r];if(0!=c.length)for(var a=1;a<=c.length/3;a++){var s=3*(a-1);n.push({data:[Z()(new Date(t[r])).format("DD-MM-YYYY"),c[s],c[s+1],c[s+2]]})}}g(n.reverse())},le=function(){var e=Object(x.a)(O.a.mark((function e(t,n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("".concat(H,"/getdata/").concat(t).concat(n));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ue=function(e){return new Promise((function(t){return setTimeout(t,e)}))},de=function(){var e=Object(x.a)(O.a.mark((function e(t){var n,r,c,a,s,o,i,l,u;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={},r=0,c=0;case 3:if(!(c<t.length)){e.next=31;break}a=t[c],s=a.data[0].split("-"),o=s[0]+"/"+$[s[1]]+"/"+s[2]+"/",r=0,i=void 0;case 9:return e.next=11,le(o,a.data[1]);case 11:if(i=e.sent,console.log(JSON.stringify(i)),"downloading"!==i.data.status&&"downloadagain"!==i.data.status){e.next=20;break}return console.log("IF EXECUTED"),r+=1,e.next=18,ue(1200);case 18:if(2!=r){e.next=20;break}return e.abrupt("break",21);case 20:if("downloading"===i.data.status||"downloadagain"===i.data.status){e.next=9;break}case 21:if(2!=r){e.next=23;break}return e.abrupt("continue",28);case 23:l={prevclose:i.data.stockData.prevclose,close:i.data.stockData.close,open:i.data.stockData.open,low:i.data.stockData.close,high:i.data.stockData.high},u=i.data.stockData.timestamp+""+i.data.stockData.symbol,n=Object(f.a)(Object(f.a)({},n),{},Object(h.a)({},u,l)),C(c),k(n);case 28:c++,e.next=3;break;case 31:k(n);case 32:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(e,t){!function(e){for(var t,n=[],r=0;r<e.length;r++){var c=e[r].data[0];n[r]=c}t=Object(X.a)(new Set(n)),console.log("Unique Dates: ",JSON.stringify(t))}(e);var n={};return e.map((function(e){var r=function(e,t,n){var r=e.indexOf(t),c=e[r+n];return c&&c!==Z()(new Date).format("DD-MM-YYYY")?c:"UNAVAIL"}(I,e.data[0],t),c=e.data[0].split("-"),a=c[0]+"-"+c[1]+"-"+c[2]+e.data[1];n[a]={date:r,symbol:e.data[1],close:0,prevclose:0}})),n},je=function(){var e=Object(x.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:"https://query2.finance.yahoo.com/v8/finance/chart/TATASTEEL.NS?formatted=true&crumb=GDg7ptpgjjp&lang=en-US&region=US&includeAdjustedClose=true&interval=1d&period1=820454400&period2=".concat(Math.round(+new Date/1e3),"&events=capitalGain%7Cdiv%7Csplit&useYfid=true&corsDomain=finance.yahoo.com")},e.next=3,d.a.post("https://us-central1-stockwatch-193209.cloudfunctions.net/getstocks",t);case 3:return n=e.sent,console.log("All Dates Resp: ",JSON.stringify(n)),console.log("LAST ITEM: ",n.data.chart.result[0].timestamp[0]),e.abrupt("return",n.data.chart.result[0].timestamp);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(e){return e.map((function(e){return Z()(new Date(1e3*e)).format("DD-MM-YYYY")}))},fe=function(){var e=Object(x.a)(O.a.mark((function e(t,n){var r,c,a,s,o,i,l,u,d,b,j,p,x,g;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("AFTERDAYDATA: ",JSON.stringify(t)),r=Object.keys(t),c=Object.assign({},J),a=0,s=0;case 5:if(!(s<r.length)){e.next=44;break}if("UNAVAIL"!=(o=t[r[s]]).date){e.next=9;break}return e.abrupt("continue",41);case 9:i=o.date.split("-"),l=i[0]+"/"+$[i[1]]+"/"+i[2]+"/",u=void 0,a=0;case 13:return e.next=15,le(l,o.symbol);case 15:if(u=e.sent,console.log(JSON.stringify(u)),"downloading"!==u.data.status&&"downloadagain"!==u.data.status){e.next=24;break}return console.log("IF EXECUTED"),a+=1,e.next=22,ue(1200);case 22:if(2!=a){e.next=24;break}return e.abrupt("break",25);case 24:if("downloading"===u.data.status||"downloadagain"===u.data.status){e.next=13;break}case 25:if(2!=a){e.next=27;break}return e.abrupt("continue",41);case 27:d={prevclose:u.data.stockData.prevclose,close:u.data.stockData.close,open:u.data.stockData.open,low:u.data.stockData.low,high:u.data.stockData.high},b=Object(f.a)({},c[n]),void 0,Object(f.a)({},b[r[s]]),p=Object(f.a)(Object(f.a)({},b[r[s]]),d),j=Object(h.a)({},r[s],Object(f.a)({},p)),x=Object(h.a)({},n,Object(f.a)(Object(f.a)({},b),j)),c=Object(f.a)(Object(f.a)({},c),x),console.log("Final DATA: ",JSON.stringify(r[s])," ITEM: ",JSON.stringify(j)),console.log("TempData: ",JSON.stringify(x)),F(c),R(Object(f.a)(Object(f.a)({},P),Object(h.a)({},n,s))),g=null==Q[n]?0:Q[n]+1,W(Object(f.a)(Object(f.a)({},Q),Object(h.a)({},n,g)));case 41:s++,e.next=5;break;case 44:F(c);case 45:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),pe=function(){var e=Object(x.a)(O.a.mark((function e(t,n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("http://localhost:8080/getmadata/".concat(t,"/").concat(n));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(x.a)(O.a.mark((function e(t,n){var r,c,a,s,o,i,l,u;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0,c=Object.assign([],p),a=I.length-1;case 3:if(!(a>=I.length-t+1)){e.next=25;break}s=I[a].split("-"),o=s[0]+"/"+$[s[1]]+"/"+s[2].slice(-2),r=0,i=void 0;case 8:return e.next=10,pe(o,n);case 10:if(i=e.sent,console.log(JSON.stringify(i)),"downloading"!==i.data.status&&"downloadagain"!==i.data.status){e.next=19;break}return console.log("IF EXECUTED"),r+=1,e.next=17,ue(1e3);case 17:if(2!=r){e.next=19;break}return e.abrupt("break",20);case 19:if("downloading"===i.data.status||"downloadagain"===i.data.status){e.next=8;break}case 20:for(l=i.data.data,u=0;u<l.length;u++)c.push({data:[I[a],l[u][1],"",""]}),console.log("NEW DATA: ",JSON.stringify(c)),console.log(JSON.stringify(i));case 22:a--,e.next=3;break;case 25:g(c);case 26:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(i.jsx)("div",{onClick:Object(x.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe(40,"gainers");case 2:case"end":return e.stop()}}),e)}))),children:"Top 5 Gainers"}),Object(i.jsx)("div",{style:{marginLeft:10},onClick:Object(x.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe(40,"losers");case 2:case"end":return e.stop()}}),e)}))),children:"Top 5 Losers"}),Object(i.jsx)("div",{style:{marginLeft:20},onClick:function(){c(!n)},children:n?"Close CSV":"Add CSV"}),Object(i.jsx)("div",{style:{marginLeft:20},onClick:function(){l(!o)},children:o?"Close Strategies":"Open Strategies"}),o?Object(i.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:["\xa0\xa0",Object(i.jsxs)("table",{border:"1px solid black;",children:[Object(i.jsx)("tr",{children:Object(i.jsx)("th",{children:"\xa0\xa0Strategy\xa0\xa0"})}),ee.length>0?Object(i.jsx)("tr",{children:Object(i.jsx)("th",{children:"Name"})}):null,ee.map((function(e){return Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:e.name}),Object(i.jsx)("td",{children:Object(i.jsx)("button",{onClick:Object(x.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,oe(e.url,"backtest",e.scan);case 2:n=t.sent,ie(n.data);case 4:case"end":return t.stop()}}),t)}))),children:"All Strategies"!=e.name?"Load Past Data":null})}),Object(i.jsx)("td",{children:Object(i.jsx)("button",{onClick:Object(x.a)(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,oe(e.url,"screener",e.scan);case 2:t.sent;case 3:case"end":return t.stop()}}),t)}))),children:"All Strategies"!=e.name?"Load Todays Data":null})})]})}))]})]}):null,Object(i.jsx)("div",{style:{marginLeft:50},onClick:Object(x.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=be(p,1),n={1:Object(f.a)({},t)},F(Object(f.a)(Object(f.a)({},J),n));case 3:case"end":return e.stop()}}),e)}))),children:"Add After 1 D List"}),Object(i.jsx)("div",{style:{marginLeft:50},onClick:Object(x.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=be(p,2),n={2:Object(f.a)({},t)},F(Object(f.a)(Object(f.a)({},J),n));case 3:case"end":return e.stop()}}),e)}))),children:"Add After 2 D List"}),Object(i.jsx)("div",{style:{marginLeft:50},onClick:Object(x.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=be(p,3),n={3:Object(f.a)({},t)},F(Object(f.a)(Object(f.a)({},J),n));case 3:case"end":return e.stop()}}),e)}))),children:"Add After 3 D List"}),Object(i.jsx)("div",{style:{marginLeft:50},onClick:Object(x.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=be(p,5),n={5:Object(f.a)({},t)},F(Object(f.a)(Object(f.a)({},J),n));case 3:case"end":return e.stop()}}),e)}))),children:"Add After 5 D List"}),Object(i.jsx)("div",{style:{marginLeft:50},onClick:Object(x.a)(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=be(p,10),n={10:Object(f.a)({},t)},F(Object(f.a)(Object(f.a)({},J),n));case 3:case"end":return e.stop()}}),e)}))),children:"Add After 10 D List"})]}),n?Object(i.jsx)(K.a,{onDrop:function(e){g([]),F({}),console.log("---------------------------"),console.log(e[0].data),console.log(e),e.shift();var t=e.filter((function(e){return"Indices"!=e.data[3]}));console.log("Filtered Data: ",JSON.stringify(t)),g(t.reverse()),console.log("---------------------------")},onError:function(e,t,n,r){console.log(e)},addRemoveButton:!0,removeButtonColor:"#659cef",onRemoveFile:function(e){console.log("---------------------------"),console.log(e),console.log("---------------------------")},children:Object(i.jsx)("span",{children:"Drop CSV file here or click to upload."})}):null,Object(i.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginTop:0},children:[Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{onClick:Object(x.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=p.length){e.next=3;break}return alert("Please add the csv"),e.abrupt("return");case 3:de(p);case 4:case"end":return e.stop()}}),e)}))),style:{marginLeft:30,fontSize:20,marginTop:20},children:["Test ",D+1," / ",p.length]}),Object(i.jsxs)("table",{ref:te,style:{},border:"3px solid black;",children:[Object(i.jsx)("th",{children:"Date"}),Object(i.jsx)("th",{children:"Symbol"}),Object(i.jsx)("th",{style:{fontSize:6},children:"Market Cap"}),Object(i.jsx)("th",{children:"Prev Day"}),Object(i.jsx)("th",{children:"Close"}),Object(i.jsx)("th",{children:"P&L"}),Object(i.jsx)("th",{children:"Ret"}),Object(i.jsx)("th",{children:"DJ"}),Object(i.jsx)("th",{children:"NDAQ"}),Object(i.jsx)("th",{children:"S68.SI"}),Object(i.jsx)("th",{children:"%5ENSEI"}),p.map((function(e){var t=e.data,n=t[0].split("-"),r=n[0]+"-"+$[n[1]]+"-"+n[2]+t[1],c=0,a=0,s=0,o=0,l=0,u=0,d=0,b=0;return y[r]&&(c=y[r].prevclose,o=(s=(a=y[r].close)-c)/y[r].open*100),G&&G["%5EDJI"]&&G["%5EDJI"][t[0]]&&G["%5EDJI"][t[0]].pnl&&(l=G["%5EDJI"][t[0]].pnl),G&&G.NDAQ&&G.NDAQ[t[0]]&&G.NDAQ[t[0]].pnl&&(u=G.NDAQ[t[0]].pnl),G&&G["S68.SI"]&&G["S68.SI"][t[0]]&&G["S68.SI"][t[0]].pnl&&(d=G["S68.SI"][t[0]].pnl),G&&G["%5ENSEI"]&&G["%5ENSEI"][t[0]]&&G["%5ENSEI"][t[0]].pnl&&(b=G["%5ENSEI"][t[0]].pnl),Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:t[0]}),Object(i.jsx)("td",{children:t[1]}),Object(i.jsx)("td",{children:t[2]}),Object(i.jsx)("td",{children:c}),Object(i.jsx)("td",{children:a}),Object(i.jsx)("td",{style:{backgroundColor:s>0?"green":0==s?"grey":"red",color:"white",fontWeight:"bold"},children:Number(s).toFixed(2)}),Object(i.jsxs)("td",{style:{backgroundColor:s>0?"green":0==s?"grey":"red",color:"white",fontWeight:"bold"},children:[Number(o).toFixed(2),"%"]}),Object(i.jsx)("td",{style:{backgroundColor:l>0?"green":0==l?"grey":"red",color:"white",fontWeight:"bold"},children:G&&G["%5EDJI"]&&G["%5EDJI"][t[0]]&&Math.round(G["%5EDJI"][t[0]].pnl)}),Object(i.jsx)("td",{style:{backgroundColor:u>0?"green":0==u?"grey":"red",color:"white",fontWeight:"bold"},children:G&&G.NDAQ&&G.NDAQ[t[0]]&&Math.round(G.NDAQ[t[0]].pnl)}),Object(i.jsx)("td",{style:{backgroundColor:d>0?"green":0==d?"grey":"red",color:"white",fontWeight:"bold"},children:G&&G["S68.SI"]&&G["S68.SI"][t[0]]&&Math.round(G["S68.SI"][t[0]].pnl)}),Object(i.jsx)("td",{style:{backgroundColor:b>0?"green":0==b?"grey":"red",color:"white",fontWeight:"bold"},children:G&&G["%5ENSEI"]&&G["%5ENSEI"][t[0]]&&Math.round(G["%5ENSEI"][t[0]].pnl)})]})}))]})]}),Object.keys(J).map((function(e){var t=J[e];console.log("ITEM: ",JSON.stringify(t));var n=Object.keys(t).length;return Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{style:{marginLeft:30,fontSize:20,marginTop:20},onClick:function(){fe(t,e)},children:["Test After ",e," D  "," ### ",P[e]?P[e]:0," / ",n,"###### Profit: ",JSON.stringify(Q)]}),Object(i.jsxs)("table",{style:{marginLeft:20,height:te.current.clientHeight},border:"3px solid black;",children:[Object(i.jsx)("th",{children:"Date"}),Object(i.jsx)("th",{children:"Symbol"}),Object(i.jsx)("th",{style:{fontSize:12},children:"Prev Close"}),Object(i.jsx)("th",{children:"Open"}),Object(i.jsx)("th",{children:"Close"}),Object(i.jsx)("th",{children:"Gapup%"}),Object(i.jsx)("th",{children:"High%"}),Object(i.jsx)("th",{children:"Low"}),Object(i.jsx)("th",{children:"Low Per"}),Object(i.jsx)("th",{children:"P&L"}),Object(i.jsx)("th",{children:"Ret"}),Object(i.jsx)("th",{children:"FP"}),Object(i.jsx)("th",{children:"FP%"}),p.map((function(e){var n=e.data,r=n[0]+""+n[1],c=0,a=0,s=0,o=0,l=0,u=0,d=0,b="",j=0,h=0;if(t[r]){u=t[r].low,t[r].open,c=Number(t[r].close-t[r].open).toFixed(2),a=Number(c/t[r].open*100).toFixed(2)+"%",s=Number(t[r].open-t[r].prevclose).toFixed(2),o=Number(s/t[r].prevclose*100).toFixed(2),l=Number((t[r].high-t[r].open)/t[r].open*100).toFixed(2),d=Number((u-t[r].open)/t[r].open*100).toFixed(2),b="https://www.tradingview.com/chart/?symbol="+t[r].symbol;var f=r.split("-");y&&y[f[0]+"-"+$[f[1]]+"-"+f[2]]&&(j=Number(t[r].close-y[f[0]+"-"+$[f[1]]+"-"+f[2]].close).toFixed(2),h=Number(j/y[f[0]+"-"+$[f[1]]+"-"+f[2]].close*100).toFixed(2))}return Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:t[r]&&t[r].date}),Object(i.jsx)("td",{onClick:function(){return window.open(b,"_blank")},children:t[r]&&t[r].symbol}),Object(i.jsx)("td",{children:t[r]&&t[r].prevclose}),Object(i.jsx)("td",{children:t[r]&&t[r].open}),Object(i.jsx)("td",{children:t[r]&&t[r].close}),Object(i.jsxs)("td",{style:{backgroundColor:s>0?"green":0==s||"UNAVAIL"==r?"grey":"red",color:"white",fontWeight:"bold"},children:[o,"%"]}),Object(i.jsxs)("td",{style:{backgroundColor:l-o>0?"green":0==l||"UNAVAIL"==r?"grey":"red",color:"white",fontWeight:"bold"},children:[l,"%"]}),Object(i.jsx)("td",{style:{backgroundColor:d>0?"green":0==d||"UNAVAIL"==r?"grey":"red",color:"white",fontWeight:"bold"},children:Number(u).toFixed(2)}),Object(i.jsxs)("td",{style:{backgroundColor:d>0?"green":0==d||"UNAVAIL"==r?"grey":"red",color:"white",fontWeight:"bold"},children:[d,"%"]}),Object(i.jsx)("td",{style:{backgroundColor:c>0?"green":0==c||"UNAVAIL"==r?"grey":"red",color:"white",fontWeight:"bold"},children:c}),Object(i.jsx)("td",{style:{backgroundColor:c>0?"green":0==c||"UNAVAIL"==r?"grey":"red",color:"white",fontWeight:"bold"},children:a}),Object(i.jsx)("td",{style:{backgroundColor:j>0?"green":0==j||"UNAVAIL"==r?"grey":"red",color:"white",fontWeight:"bold"},children:j}),Object(i.jsxs)("td",{style:{backgroundColor:j>0?"green":0==j||"UNAVAIL"==r?"grey":"red",color:"white",fontWeight:"bold"},children:[h,"%"]})]})}))]})]})}))]})]})}),ee=n(74),te=Object(Y.b)(G);s.a.render(Object(i.jsx)(b.a,{store:G,children:Object(i.jsx)(ee.a,{loading:null,persistor:te,children:Object(i.jsxs)(o.a,{children:[Object(i.jsx)(z,{}),Object(i.jsxs)(q.c,{children:[Object(i.jsx)(q.a,{path:"/bp",element:Object(i.jsx)(l,{})}),Object(i.jsxs)(q.a,{path:"/bp/dashboard",children:[Object(i.jsx)(q.a,{path:"/bp/dashboard/watchlist",element:Object(i.jsx)(E,{})}),Object(i.jsx)(q.a,{path:"/bp/dashboard/strategies",element:Object(i.jsx)(M,{})}),Object(i.jsx)(q.a,{path:"/bp/dashboard/backtest",element:Object(i.jsx)($,{})}),Object(i.jsx)(q.a,{path:"/bp/dashboard/socket",element:Object(i.jsx)(U,{})})]})]})]})})}),document.getElementById("root")),J()},80:function(e,t,n){}},[[123,1,2]]]);
//# sourceMappingURL=main.5ddd84b8.chunk.js.map