(this.webpackJsonpblackpearl=this.webpackJsonpblackpearl||[]).push([[0],{104:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(28),s=n.n(a),o=(n(60),n(6)),i=(n(61),n(7)),l=n.n(i),u=n(0);var d=n(8),b=n(9),j=n(14),h=n(5),f=n(2),p=n.n(f),O=n(3),x=Object(b.b)("fetchByIdStatus",function(){var e=Object(O.a)(p.a.mark((function e(t,n){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("https://us-central1-stockwatch-193209.cloudfunctions.net/stocks");case 2:return c=e.sent,t(c.data),e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),g=Object(b.b)("getStocksDetailsApi",function(){var e=Object(O.a)(p.a.mark((function e(t,n){var c,r,a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.reduce((function(e,t){return""==e?t.symbol:e+","+t.symbol}),""),r={url:"https://query1.finance.yahoo.com/v7/finance/spark?symbols="+c+"&range=1d&interval=5m&indicators=close&includeTimestamps=false&includePrePost=false&corsDomain=in.finance.yahoo.com&.tsrc=finance"},e.next=5,l.a.post("https://us-central1-stockwatch-193209.cloudfunctions.net/getstocks",r);case 5:return a=e.sent,n=a.data.spark.result,s=n.reduce((function(e,t){return Object(h.a)(Object(j.a)({},t.symbol,t.response[0].meta.regularMarketPrice),e)}),{}),e.abrupt("return",s);case 8:case"end":return e.stop()}var n}),e)})));return function(t,n){return e.apply(this,arguments)}}()),m=Object(b.b)("addstocktowatchlist",function(){var e=Object(O.a)(p.a.mark((function e(t,n){var c,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.stock,r=t.callback,e.next=3,l.a.post("https://us-central1-stockwatch-193209.cloudfunctions.net/stocks",c);case 3:return a=e.sent,r(),e.abrupt("return",a.status);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),v=Object(b.b)("removestockfromwatchlist",function(){var e=Object(O.a)(p.a.mark((function e(t,n){var c,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.stockSymbol,r=t.callback,e.next=3,l.a.post("https://us-central1-stockwatch-193209.cloudfunctions.net/stocks/delete/"+c);case 3:return a=e.sent,r(),e.abrupt("return",a.status);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),y=Object(b.b)("searchstockApi",function(){var e=Object(O.a)(p.a.mark((function e(t,n){var c,r,a,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.searchTermR,r=t.callback,a={url:"https://query2.finance.yahoo.com/v1/finance/search?q="+c+"&quotesCount=6&newsCount=0&enableFuzzyQuery=false&quotesQueryId=tss_match_phrase_query&multiQuoteQueryId=multi_quote_single_token_query&newsQueryId=news_ss_symbols&enableCb=false&enableNavLinks=false&vespaNewsTimeoutMs=600"},e.next=5,l.a.post("https://us-central1-stockwatch-193209.cloudfunctions.net/getstocks",a);case 5:return s=e.sent,r(),e.abrupt("return",s.data.quotes);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),k=Object(b.b)("getStockChartData",function(){var e=Object(O.a)(p.a.mark((function e(t,n){var c,r,a,s,o,i,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.symbol,r=t.sevendayprevts,a=t.currentdatets,s=t.callback,o="https://query2.finance.yahoo.com/v8/finance/chart/"+c+"?formatted=true&lang=en-US&region=US&includeAdjustedClose=true&interval=1d&period1="+r+"&period2="+a+"&events=capitalGain%7Cdiv%7Csplit&useYfid=true&corsDomain=finance.yahoo.com",console.log("URL: ",o),i={url:o},e.next=6,l.a.post("https://us-central1-stockwatch-193209.cloudfunctions.net/getstocks",i);case 6:return u=e.sent,s(),e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),w=Object(b.c)({name:"watchlist",initialState:{stockprices:{},searchterm:"",searchlist:[],watchlist:[],chartData:{}},reducers:{setsearchtermR:function(e,t){e.searchterm=t.payload}},extraReducers:function(e){e.addCase(x.fulfilled,(function(e,t){e.watchlist=t.payload})),e.addCase(g.fulfilled,(function(e,t){e.stockprices=t.payload})),e.addCase(m.fulfilled,(function(e,t){})),e.addCase(v.fulfilled,(function(e,t){})),e.addCase(y.fulfilled,(function(e,t){e.searchlist=t.payload})),e.addCase(k.fulfilled,(function(e,t){console.log("Success Action: ",t.payload);var n=t.payload.data.chart.result[0].meta.symbol;e.chartData[n]=t.payload}))}}),C=w.actions.setsearchtermR,S=w.reducer;function D(e){var t=e.entry,n=Object(c.useState)(""),r=Object(o.a)(n,2),a=r[0],s=r[1];return Object(u.jsxs)("div",{style:{display:"flex"},children:[Object(u.jsx)("input",{style:{width:"70px"},type:"text",placeholder:"Risk",value:a,onChange:function(e){s(e.target.value.replace(/\D/,""))}}),Object(u.jsx)("div",{style:{margin:10},children:Math.round(a/t)})]})}var A=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.watchlist.stockprices})),n=Object(d.c)((function(e){return e.watchlist.searchlist})),r=Object(d.c)((function(e){return e.watchlist.searchterm})),a=Object(d.c)((function(e){return e.watchlist.watchlist})),s=Object(d.c)((function(e){return e.watchlist.chartData})),o=function(){var t={};t.searchTermR=r+"",t.callback=function(){},e(y(t))};return Object(c.useEffect)((function(){e(x((function(t){e(g(t))})))}),[]),Object(u.jsxs)("div",{className:"App",children:[Object(u.jsx)("input",{type:"text",placeholder:"Search",value:r,onChange:function(t){e(C(t.target.value)),r.length},onKeyDown:function(e){if(13===e.keyCode){if(0==r.length)return void alert("Please enter name of stock");o()}}}),Object(u.jsxs)("button",{onClick:function(){o()},children:[" ","Search"," "]}),Object(u.jsxs)("table",{border:"1px solid black;",children:[Object(u.jsx)("th",{children:"Search List"}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Exchange"}),Object(u.jsx)("th",{children:"Name"})]}),n.map((function(t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:t.exchDisp})," ",Object(u.jsx)("td",{children:t.shortname})," ",Object(u.jsx)("td",{children:Object(u.jsx)("button",{onClick:function(){var n={};n.stock=t,n.callback=function(){e(x((function(t){e(g(t))})))},e(m(n))},children:"Add"})})]})}))]}),Object(u.jsx)("br",{}),Object(u.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:Object(u.jsxs)("table",{border:"1px solid black;",children:[Object(u.jsx)("tr",{children:Object(u.jsx)("th",{children:"WatchList"})}),a.length>0?Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{}),Object(u.jsx)("th",{children:"Exchange"}),Object(u.jsx)("th",{children:"Name"}),Object(u.jsx)("th",{children:"Price"}),Object(u.jsx)("th",{}),Object(u.jsx)("th",{children:"SL"}),Object(u.jsx)("th",{children:"TARGET"}),Object(u.jsx)("th",{children:"  ENTRY  "}),Object(u.jsx)("th",{children:"Profit%"}),Object(u.jsx)("th",{children:"Total Amt  | Buy Qty "})]}):null,a.map((function(n){var c=[],r=0,a=0,o=t[n.symbol],i=0;if(console.log("ChartData: ",JSON.stringify(s)),s&&s[n.symbol]){var l=(c=s[n.symbol].data.chart.result[0].indicators.quote[0].low).at(-1),d=c.at(-2);a=2*(o-(r=d<l?d-1:l-1))+o,i=2*(o-r)/o*100,Math.round(o-r)}return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:Object(u.jsx)("button",{onClick:function(){return function(t){var n={};n.stockSymbol=t,n.callback=function(){e(x((function(t){e(g(t))})))},e(v(n))}(n.symbol)},children:"Remove"})}),Object(u.jsx)("td",{children:n.exchDisp})," ",Object(u.jsx)("td",{children:n.shortname})," ",Object(u.jsxs)("td",{children:[t[n.symbol],"  "]}),Object(u.jsx)("td",{children:Object(u.jsx)("button",{onClick:function(){var t={};t.symbol=n.symbol,t.sevendayprevts=Math.round(new Date(Date.now()-6048e5).getTime()/1e3),t.currentdatets=Math.round((new Date).getTime()/1e3),console.log("Seven day prev time: ",Math.round(new Date(Date.now()-6048e5).getTime()/1e3)),t.callback=function(){},e(k(t))},children:"Calculate"})}),Object(u.jsx)("td",{children:Math.round(r)}),Object(u.jsx)("td",{children:Math.round(a)}),Object(u.jsx)("td",{children:Math.round(o)}),Object(u.jsx)("td",{children:Math.round(i)}),Object(u.jsx)("td",{children:Object(u.jsx)(D,{entry:o})})]})}))]})})]})},N=Object(b.b)("getstrategies",function(){var e=Object(O.a)(p.a.mark((function e(t,n){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("https://us-central1-stockwatch-193209.cloudfunctions.net/strategy");case 2:return c=e.sent,t(c.data),e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),L=Object(b.b)("deletestrategy",function(){var e=Object(O.a)(p.a.mark((function e(t,n){var c,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.strategy,r=t.callback,e.next=3,l.a.post("https://us-central1-stockwatch-193209.cloudfunctions.net/strategy/delete",c);case 3:return a=e.sent,r(a.data),e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),T=Object(b.b)("addstrategy",function(){var e=Object(O.a)(p.a.mark((function e(t,n){var c,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.strategy,r=t.callback,e.next=3,l.a.post("https://us-central1-stockwatch-193209.cloudfunctions.net/strategy",c);case 3:return a=e.sent,r(a.data),e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());var E=function(){var e=Object(d.b)(),t=r.a.useState(""),n=Object(o.a)(t,2),a=n[0],s=n[1],i=r.a.useState(""),b=Object(o.a)(i,2),j=b[0],h=b[1],f=r.a.useState(""),p=Object(o.a)(f,2),O=p[0],v=p[1],y=r.a.useState([]),k=Object(o.a)(y,2),w=(k[0],k[1]),C=r.a.useState([]),S=Object(o.a)(C,2),D=(S[0],S[1],r.a.useState([])),A=Object(o.a)(D,2),E=(A[0],A[1],r.a.useState("")),F=Object(o.a)(E,2),I=F[0],M=F[1],J=Object(d.c)((function(e){return e.watchlist.stockprices})),P=Object(d.c)((function(e){return e.watchlist.searchlist})),R=(Object(d.c)((function(e){return e.watchlist.searchterm})),Object(d.c)((function(e){return e.watchlist.watchlist}))),q=Object(d.c)((function(e){return e.strategies.strategies})),U=function(e){s(e.target.value)},_=function(e){13===e.keyCode&&Y()},Y=function(){if(0!=a.length){var e="https://query2.finance.yahoo.com/v1/finance/search?q="+a+"&quotesCount=6&newsCount=0&enableFuzzyQuery=false&quotesQueryId=tss_match_phrase_query&multiQuoteQueryId=multi_quote_single_token_query&newsQueryId=news_ss_symbols&enableCb=false&enableNavLinks=false&vespaNewsTimeoutMs=600";l.a.request({method:"get",url:"https://api.allorigins.win/get?url=".concat(encodeURIComponent(e))}).then((function(e){console.log(e),w(JSON.parse(e.data.contents).quotes)}))}else alert("Please enter name of stock")};return Object(c.useEffect)((function(){e(N((function(e){})))}),[]),Object(u.jsxs)("div",{className:"App",children:[Object(u.jsxs)("div",{style:{display:"flex",flexDirection:"column",marginLeft:10},children:[Object(u.jsx)("input",{style:{width:"300px"},type:"text",placeholder:"Strategy Name",value:a,onChange:U,onKeyDown:_}),Object(u.jsx)("input",{style:{width:"300px",marginTop:5},type:"text",placeholder:"Url",value:j,onChange:function(e){h(e.target.value)}}),Object(u.jsx)("input",{style:{width:"300px",marginTop:5},type:"text",placeholder:"Scan Script",value:O,onChange:function(e){v(e.target.value)}}),Object(u.jsx)("button",{style:{width:"100px",marginTop:2},onClick:function(){var t={};t.strategy={name:a,url:j,scan:O},t.callback=function(){e(N((function(e){})))},e(T(t))},children:"Add Strategy"})]}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:["\xa0\xa0",Object(u.jsxs)("table",{border:"1px solid black;",children:[Object(u.jsx)("tr",{children:Object(u.jsx)("th",{children:"\xa0\xa0Strategy\xa0\xa0"})}),q.length>0?Object(u.jsx)("tr",{children:Object(u.jsx)("th",{children:"Name"})}):null,q.map((function(t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:t.name}),Object(u.jsx)("td",{children:Object(u.jsx)("button",{onClick:function(){var n={};n.strategy=t,n.callback=function(){e(N((function(e){})))},e(L(n))},children:"Remove"})})]})}))]})]}),Object(u.jsx)("div",{style:{display:"flex",flexDirection:"row",marginTop:20},children:q.map((function(e){return Object(u.jsx)("div",{onClick:function(){M(e.name)},style:{display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:I==e.name?"green":"grey",padding:"10px",color:"white",borderRadius:30,margin:10},children:e.name})}))}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"30%",marginLeft:10},children:[Object(u.jsx)("input",{type:"text",placeholder:"Search",value:a,onChange:U,onKeyDown:_}),Object(u.jsxs)("button",{style:{width:"40%",marginTop:2},onClick:function(){Y()},children:[" ","Search"," "]})]}),Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),Object(u.jsxs)("table",{border:"1px solid black;",children:[Object(u.jsx)("th",{children:"Search List"}),Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Exchange"}),Object(u.jsx)("th",{children:"Name"})]}),P.map((function(t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:t.exchDisp})," ",Object(u.jsx)("td",{children:t.shortname})," ",Object(u.jsx)("td",{children:Object(u.jsx)("button",{onClick:function(){var n={};n.stock=t,n.callback=function(){e(x((function(t){e(g(t))})))},e(m(n))},children:"Add"})})]})}))]}),Object(u.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:Object(u.jsxs)("table",{border:"1px solid black;",children:[Object(u.jsx)("tr",{children:Object(u.jsx)("th",{children:"WatchList"})}),R.length>0?Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Exchange"}),Object(u.jsx)("th",{children:"Name"}),Object(u.jsx)("th",{children:"Price"})]}):null,R.map((function(e){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:e.exchDisp})," ",Object(u.jsx)("td",{children:e.shortname})," ",Object(u.jsxs)("td",{children:[J[e.symbol],"  "]}),Object(u.jsx)("td",{children:Object(u.jsx)("button",{onClick:function(){},children:"Remove"})})]})}))]})})]})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,106)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},I=n(20),M=n(4),J=Object(b.c)({name:"strategies",initialState:{strategies:[{name:"All Strategies"}]},reducers:{},extraReducers:function(e){e.addCase(N.fulfilled,(function(e,t){e.strategies=t.payload,e.strategies.unshift({name:"All Strategies"})})),e.addCase(L.fulfilled,(function(e,t){})),e.addCase(T.fulfilled,(function(e,t){}))}}).reducer,P=n(10),R=n(29),q=n(52),U=n.n(q),_=Object(P.b)({watchlist:S,strategies:J}),Y={key:"root",storage:U.a},V=Object(R.a)(Y,_),W=Object(b.a)({reducer:V});function B(){return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Black Pearl"}),Object(u.jsxs)("nav",{style:{paddingBottom:"1rem"},children:[Object(u.jsx)(I.b,{to:"/bp/watchlist",children:"WatchList"})," |","  ",Object(u.jsx)(I.b,{to:"/bp/strategies",children:"Strategies"})," |","  ",Object(u.jsx)(I.b,{to:"/bp/backtest",children:"BackTest"})]})]})}var Q=n(19),z=n(53),G=n(24),K=n.n(G),X=(n(105),function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(!1),s=Object(o.a)(a,2),i=s[0],b=s[1],f=Object(c.useState)([]),x=Object(o.a)(f,2),g=x[0],m=x[1],v=Object(c.useState)({}),y=Object(o.a)(v,2),k=y[0],w=y[1],C=Object(c.useState)(0),S=Object(o.a)(C,2),D=S[0],A=S[1],N=Object(c.useState)([]),L=Object(o.a)(N,2),T=L[0],E=L[1],F=Object(c.useState)({}),I=Object(o.a)(F,2),M=I[0],J=I[1],P=Object(c.useState)({}),R=Object(o.a)(P,2),q=R[0],U=R[1],_=Object(c.useState)({}),Y=Object(o.a)(_,2),V=Y[0],W=Y[1],B=window.location.origin.replace("3000","8080"),G={"01":"JAN","02":"FEB","03":"MAR","04":"APR","05":"MAY","06":"JUN","07":"JUL","08":"AUG","09":"SEP",10:"OCT",11:"NOV",12:"DEC"},X=Object(d.c)((function(e){return e.strategies.strategies}));Object(c.useEffect)(Object(O.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H();case 2:case"end":return e.stop()}}),e)}))),[]);var H=function(){var e=Object(O.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re();case 2:return t=e.sent,n=ae(t),console.log("AllDays: ",JSON.stringify(n)),E(n),e.abrupt("return");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(O.a)(p.a.mark((function e(t,n,c){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={url:t,type:n,scan_clause:{scan_clause:c}},console.log("BODY: ",JSON.stringify(r)),e.next=4,l.a.post("http://localhost:8082/apis",r);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),$=function(e){for(var t=e.metaData[0].tradeTimes,n=[],c=0;c<e.aggregatedStockList.length;c++){var r=e.aggregatedStockList[c];if(0!=r.length)for(var a=1;a<=r.length/3;a++){var s=3*(a-1);n.push({data:[K()(new Date(t[c])).format("DD-MM-YYYY"),r[s],r[s+1],r[s+2]]})}}m(n.reverse())},ee=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("".concat(B,"/getdata/").concat(t).concat(n));case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),te=function(e){return new Promise((function(t){return setTimeout(t,e)}))},ne=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,c,r,a,s,o,i,l,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={},c=0,r=0;case 3:if(!(r<t.length)){e.next=31;break}a=t[r],s=a.data[0].split("-"),o=s[0]+"/"+G[s[1]]+"/"+s[2]+"/",c=0,i=void 0;case 9:return e.next=11,ee(o,a.data[1]);case 11:if(i=e.sent,console.log(JSON.stringify(i)),"downloading"!==i.data.status&&"downloadagain"!==i.data.status){e.next=20;break}return console.log("IF EXECUTED"),c+=1,e.next=18,te(3e3);case 18:if(3!=c){e.next=20;break}return e.abrupt("break",21);case 20:if("downloading"===i.data.status||"downloadagain"===i.data.status){e.next=9;break}case 21:if(3!=c){e.next=23;break}return e.abrupt("continue",28);case 23:l={prevclose:i.data.stockData.prevclose,close:i.data.stockData.close,open:i.data.stockData.open,low:i.data.stockData.close,high:i.data.stockData.high},u=i.data.stockData.timestamp+""+i.data.stockData.symbol,n=Object(h.a)(Object(h.a)({},n),{},Object(j.a)({},u,l)),A(r),w(n);case 28:r++,e.next=3;break;case 31:w(n);case 32:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(e,t){!function(e){for(var t,n=[],c=0;c<e.length;c++){var r=e[c].data[0];n[c]=r}t=Object(Q.a)(new Set(n)),console.log("Unique Dates: ",JSON.stringify(t))}(e);var n={};return e.map((function(e){var c=function(e,t,n,c){var r=t.indexOf(n),a=t[r+c];return a&&a!==K()(new Date).format("DD-MM-YYYY")?a:"UNAVAIL"}(0,T,e.data[0],t),r=e.data[0].split("-"),a=r[0]+"-"+r[1]+"-"+r[2]+e.data[1];n[a]={date:c,symbol:e.data[1],close:0,prevclose:0}})),n},re=function(){var e=Object(O.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:"https://query2.finance.yahoo.com/v8/finance/chart/TATASTEEL.NS?formatted=true&crumb=GDg7ptpgjjp&lang=en-US&region=US&includeAdjustedClose=true&interval=1d&period1=820454400&period2=".concat(Math.round(+new Date/1e3),"&events=capitalGain%7Cdiv%7Csplit&useYfid=true&corsDomain=finance.yahoo.com")},e.next=3,l.a.post("https://us-central1-stockwatch-193209.cloudfunctions.net/getstocks",t);case 3:return n=e.sent,console.log("All Dates Resp: ",JSON.stringify(n)),console.log("LAST ITEM: ",n.data.chart.result[0].timestamp[0]),e.abrupt("return",n.data.chart.result[0].timestamp);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(e){return e.map((function(e){return K()(new Date(1e3*e)).format("DD-MM-YYYY")}))},se=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var c,r,a,s,o,i,l,u,d,b,f,O,x,g;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("AFTERDAYDATA: ",JSON.stringify(t)),c=Object.keys(t),r=Object.assign({},M),a=0,s=0;case 5:if(!(s<c.length)){e.next=44;break}if("UNAVAIL"!=(o=t[c[s]]).date){e.next=9;break}return e.abrupt("continue",41);case 9:i=o.date.split("-"),l=i[0]+"/"+G[i[1]]+"/"+i[2]+"/",u=void 0,a=0;case 13:return e.next=15,ee(l,o.symbol);case 15:if(u=e.sent,console.log(JSON.stringify(u)),"downloading"!==u.data.status&&"downloadagain"!==u.data.status){e.next=24;break}return console.log("IF EXECUTED"),a+=1,e.next=22,te(3e3);case 22:if(3!=a){e.next=24;break}return e.abrupt("break",25);case 24:if("downloading"===u.data.status||"downloadagain"===u.data.status){e.next=13;break}case 25:if(3!=a){e.next=27;break}return e.abrupt("continue",41);case 27:d={prevclose:u.data.stockData.prevclose,close:u.data.stockData.close,open:u.data.stockData.open,low:u.data.stockData.low,high:u.data.stockData.high},b=Object(h.a)({},r[n]),void 0,Object(h.a)({},b[c[s]]),O=Object(h.a)(Object(h.a)({},b[c[s]]),d),f=Object(j.a)({},c[s],Object(h.a)({},O)),x=Object(j.a)({},n,Object(h.a)(Object(h.a)({},b),f)),r=Object(h.a)(Object(h.a)({},r),x),console.log("Final DATA: ",JSON.stringify(c[s])," ITEM: ",JSON.stringify(f)),console.log("TempData: ",JSON.stringify(x)),J(r),U(Object(h.a)(Object(h.a)({},q),Object(j.a)({},n,s))),g=null==V[n]?0:V[n]+1,W(Object(h.a)(Object(h.a)({},V),Object(j.a)({},n,g)));case 41:s++,e.next=5;break;case 44:J(r);case 45:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),oe=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.get("http://localhost:8080/getmadata/".concat(t,"/").concat(n));case 2:return c=e.sent,e.abrupt("return",c);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ie=function(){var e=Object(O.a)(p.a.mark((function e(t,n){var c,r,a,s,o,i,l,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=0,r=Object.assign([],g),a=T.length-1;case 3:if(!(a>=T.length-t+1)){e.next=25;break}s=T[a].split("-"),o=s[0]+"/"+G[s[1]]+"/"+s[2].slice(-2),c=0,i=void 0;case 8:return e.next=10,oe(o,n);case 10:if(i=e.sent,console.log(JSON.stringify(i)),"downloading"!==i.data.status&&"downloadagain"!==i.data.status){e.next=19;break}return console.log("IF EXECUTED"),c+=1,e.next=17,te(1e3);case 17:if(2!=c){e.next=19;break}return e.abrupt("break",20);case 19:if("downloading"===i.data.status||"downloadagain"===i.data.status){e.next=8;break}case 20:for(l=i.data.data,u=0;u<l.length;u++)r.push({data:[T[a],l[u][1],"",""]}),console.log("NEW DATA: ",JSON.stringify(r)),console.log(JSON.stringify(i));case 22:a--,e.next=3;break;case 25:m(r);case 26:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(u.jsx)("div",{onClick:Object(O.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie(40,"gainers");case 2:case"end":return e.stop()}}),e)}))),children:"Top 5 Gainers"}),Object(u.jsx)("div",{style:{marginLeft:10},onClick:Object(O.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ie(40,"losers");case 2:case"end":return e.stop()}}),e)}))),children:"Top 5 Losers"}),Object(u.jsx)("div",{style:{marginLeft:20},onClick:function(){r(!n)},children:n?"Close CSV":"Add CSV"}),Object(u.jsx)("div",{style:{marginLeft:20},onClick:function(){b(!i)},children:i?"Close Strategies":"Open Strategies"}),i?Object(u.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:["\xa0\xa0",Object(u.jsxs)("table",{border:"1px solid black;",children:[Object(u.jsx)("tr",{children:Object(u.jsx)("th",{children:"\xa0\xa0Strategy\xa0\xa0"})}),X.length>0?Object(u.jsx)("tr",{children:Object(u.jsx)("th",{children:"Name"})}):null,X.map((function(e){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:e.name}),Object(u.jsx)("td",{children:Object(u.jsx)("button",{onClick:Object(O.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z(e.url,"backtest",e.scan);case 2:n=t.sent,$(n.data);case 4:case"end":return t.stop()}}),t)}))),children:"All Strategies"!=e.name?"Load Past Data":null})}),Object(u.jsx)("td",{children:Object(u.jsx)("button",{onClick:Object(O.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z(e.url,"screener",e.scan);case 2:t.sent;case 3:case"end":return t.stop()}}),t)}))),children:"All Strategies"!=e.name?"Load Todays Data":null})})]})}))]})]}):null,Object(u.jsx)("div",{style:{marginLeft:50},onClick:Object(O.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=ce(g,1),n={1:Object(h.a)({},t)},J(Object(h.a)(Object(h.a)({},M),n));case 3:case"end":return e.stop()}}),e)}))),children:"Add After 1 D List"}),Object(u.jsx)("div",{style:{marginLeft:50},onClick:Object(O.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=ce(g,2),n={2:Object(h.a)({},t)},J(Object(h.a)(Object(h.a)({},M),n));case 3:case"end":return e.stop()}}),e)}))),children:"Add After 2 D List"}),Object(u.jsx)("div",{style:{marginLeft:50},onClick:Object(O.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=ce(g,3),n={3:Object(h.a)({},t)},J(Object(h.a)(Object(h.a)({},M),n));case 3:case"end":return e.stop()}}),e)}))),children:"Add After 3 D List"}),Object(u.jsx)("div",{style:{marginLeft:50},onClick:Object(O.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=ce(g,5),n={5:Object(h.a)({},t)},J(Object(h.a)(Object(h.a)({},M),n));case 3:case"end":return e.stop()}}),e)}))),children:"Add After 5 D List"}),Object(u.jsx)("div",{style:{marginLeft:50},onClick:Object(O.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=ce(g,10),n={10:Object(h.a)({},t)},J(Object(h.a)(Object(h.a)({},M),n));case 3:case"end":return e.stop()}}),e)}))),children:"Add After 10 D List"})]}),n?Object(u.jsx)(z.a,{onDrop:function(e){console.log("---------------------------"),console.log(e[0].data),console.log(e),e.shift();var t=e.filter((function(e){return"Indices"!=e.data[3]}));console.log("Filtered Data: ",JSON.stringify(t)),m(t.reverse()),console.log("---------------------------")},onError:function(e,t,n,c){console.log(e)},addRemoveButton:!0,removeButtonColor:"#659cef",onRemoveFile:function(e){console.log("---------------------------"),console.log(e),console.log("---------------------------")},children:Object(u.jsx)("span",{children:"Drop CSV file here or click to upload."})}):null,Object(u.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginTop:0},children:[Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{onClick:Object(O.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=g.length){e.next=3;break}return alert("Please add the csv"),e.abrupt("return");case 3:ne(g);case 4:case"end":return e.stop()}}),e)}))),style:{marginLeft:30,fontSize:20,marginTop:20},children:["Test ",D+1," / ",g.length]}),Object(u.jsxs)("table",{style:{},border:"3px solid black;",children:[Object(u.jsx)("th",{children:"Date"}),Object(u.jsx)("th",{children:"Symbol"}),Object(u.jsx)("th",{style:{fontSize:6},children:"Market Cap"}),Object(u.jsx)("th",{children:"Prev Day"}),Object(u.jsx)("th",{children:"Close"}),Object(u.jsx)("th",{children:"P&L"}),Object(u.jsx)("th",{children:"Ret"}),Object(u.jsx)("th",{children:"DJ"}),g.map((function(e){var t=e.data,n=t[0].split("-"),c=n[0]+"-"+G[n[1]]+"-"+n[2]+t[1],r=0,a=0,s=0,o=0;return k[c]&&(r=k[c].prevclose,o=(s=(a=k[c].close)-r)/k[c].open*100),Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:t[0]}),Object(u.jsx)("td",{children:t[1]}),Object(u.jsx)("td",{children:t[2]}),Object(u.jsx)("td",{children:r}),Object(u.jsx)("td",{children:a}),Object(u.jsx)("td",{style:{backgroundColor:s>0?"green":0==s?"grey":"red",color:"white",fontWeight:"bold"},children:Number(s).toFixed(2)}),Object(u.jsxs)("td",{style:{backgroundColor:s>0?"green":0==s?"grey":"red",color:"white",fontWeight:"bold"},children:[Number(o).toFixed(2),"%"]})]})}))]})]}),Object.keys(M).map((function(e){var t=M[e];console.log("ITEM: ",JSON.stringify(t));var n=Object.keys(t).length;return Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{style:{marginLeft:30,fontSize:20,marginTop:20},onClick:function(){se(t,e)},children:["Test After ",e," D  "," ### ",q[e]?q[e]:0," / ",n,"###### Profit: ",JSON.stringify(V)]}),Object(u.jsxs)("table",{style:{marginLeft:20},border:"3px solid black;",children:[Object(u.jsx)("th",{children:"Date"}),Object(u.jsx)("th",{children:"Symbol"}),Object(u.jsx)("th",{style:{fontSize:12},children:"Prev Close"}),Object(u.jsx)("th",{children:"Open"}),Object(u.jsx)("th",{children:"Close"}),Object(u.jsx)("th",{children:"Gapup%"}),Object(u.jsx)("th",{children:"High%"}),Object(u.jsx)("th",{children:"Low"}),Object(u.jsx)("th",{children:"Low Per"}),Object(u.jsx)("th",{children:"P&L"}),Object(u.jsx)("th",{children:"Ret"}),Object(u.jsx)("th",{children:"FP"}),Object(u.jsx)("th",{children:"FP%"}),g.map((function(e){var n=e.data,c=n[0]+""+n[1],r=0,a=0,s=0,o=0,i=0,l=0,d=0,b="",j=0;if(t[c]){l=t[c].low,r=Number(t[c].close-t[c].prevclose).toFixed(2),a=Number(r/t[c].prevclose*100).toFixed(2)+"%",s=Number(t[c].open-t[c].prevclose).toFixed(2),o=Number(s/t[c].prevclose*100).toFixed(2),i=Number((t[c].high-t[c].prevclose)/t[c].prevclose*100).toFixed(2),d=Number((l-t[c].prevclose)/t[c].prevclose*100).toFixed(2),b="https://www.tradingview.com/chart/?symbol="+t[c].symbol;var h=c.split("-");k&&k[h[0]+"-"+G[h[1]]+"-"+h[2]]&&(j=Number(t[c].high-k[h[0]+"-"+G[h[1]]+"-"+h[2]].close).toFixed(2),Number(j/k[h[0]+"-"+G[h[1]]+"-"+h[2]].close*100).toFixed(2))}return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:t[c]&&t[c].date}),Object(u.jsx)("td",{onClick:function(){return window.open(b,"_blank")},children:t[c]&&t[c].symbol}),Object(u.jsx)("td",{children:t[c]&&t[c].prevclose}),Object(u.jsx)("td",{children:t[c]&&t[c].open}),Object(u.jsx)("td",{children:t[c]&&t[c].close}),Object(u.jsxs)("td",{style:{backgroundColor:s>0?"green":0==s||"UNAVAIL"==c?"grey":"red",color:"white",fontWeight:"bold"},children:[o,"%"]}),Object(u.jsxs)("td",{style:{backgroundColor:i>0?"green":0==i||"UNAVAIL"==c?"grey":"red",color:"white",fontWeight:"bold"},children:[i,"%"]}),Object(u.jsx)("td",{style:{backgroundColor:d>0?"green":0==d||"UNAVAIL"==c?"grey":"red",color:"white",fontWeight:"bold"},children:Number(l).toFixed(2)}),Object(u.jsxs)("td",{style:{backgroundColor:d>0?"green":0==d||"UNAVAIL"==c?"grey":"red",color:"white",fontWeight:"bold"},children:[d,"%"]}),Object(u.jsx)("td",{style:{backgroundColor:r>0?"green":0==r||"UNAVAIL"==c?"grey":"red",color:"white",fontWeight:"bold"},children:r}),Object(u.jsx)("td",{style:{backgroundColor:r>0?"green":0==r||"UNAVAIL"==c?"grey":"red",color:"white",fontWeight:"bold"},children:a})]})}))]})]})}))]})]})}),H=n(55),Z=Object(R.b)(W);s.a.render(Object(u.jsx)(d.a,{store:W,children:Object(u.jsx)(H.a,{loading:null,persistor:Z,children:Object(u.jsxs)(I.a,{children:[Object(u.jsx)(B,{}),Object(u.jsx)(M.c,{children:Object(u.jsxs)(M.a,{path:"/",children:[Object(u.jsx)(M.a,{path:"/bp/watchlist",element:Object(u.jsx)(A,{})}),Object(u.jsx)(M.a,{path:"/bp/strategies",element:Object(u.jsx)(E,{})}),Object(u.jsx)(M.a,{path:"/bp/backtest",element:Object(u.jsx)(X,{})})]})})]})})}),document.getElementById("root")),F()},60:function(e,t,n){},61:function(e,t,n){},91:function(e,t){},93:function(e,t){}},[[104,1,2]]]);
//# sourceMappingURL=main.a758a632.chunk.js.map